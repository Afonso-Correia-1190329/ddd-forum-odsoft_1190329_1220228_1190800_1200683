plugins {
  id "com.github.node-gradle.node" version "7.0.0"
}

node {
  version = '12.22.12'
  npmVersion = '6.14.16'
  download = true
}

task build(type: NpxTask) {
  doFirst{
    println "Building..."

    delete "dist"
  }

  dependsOn npmInstall
  command = 'tsc'
  inputs.files('package.json', 'package-lock.json', 'nodemon.json', 'tsconfig.json', 'tsconfig.app.json')
  inputs.dir('src')
  inputs.dir(fileTree("node_modules").exclude(".cache"))
  outputs.dir('dist')

  doLast{
    println "Build Completed"
  }
}
